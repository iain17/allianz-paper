\chapter{De architectuur van de blockchain technologie}
Dit hoofdstuk gaat iets verder in op de basis architectuur van de blockchain. Dit zodat tijdens het ontwikkelen van de Proof of Concept we de basis begrippen van de architectuur begrijpen.

\section{Blok (block)}
De blockchain bied een gedistribueerd grootboeksysteem. Gegevens worden permanent opgeslagen in het netwerk via bestanden die blokken worden genoemd. Een blok is een document alle recente transacties die nog moeten worden vastgelegd. Het heeft daarom de naam blockchain, omdat het een reeks van blokken die naar de vorige verwijzen\cite{blochchainTechSymmbioticDev}.\par

Een blok in het geval van de Bitcoin bestaat uit een header en een body \cite{blockchainIssuesAndChallenges}. De header bestaat uit drie stukken meta gegevens. De eerste is een verwijzing naar een vorige blokhash (Merkle-hash \footnote{https://en.wikipedia.org/wiki/Merkle\_tree}). Hierdoor verbindt het blok met de vorige uit de blockchain. De tweede set van meta gegevens is  moelijkheidsgraad, tijdstempel en nonce. Het laatste stuk metadata is de Merkle-tree root, een datastructuur die wordt gebruikt om alle transacties in het blok efficiënt samen te vatten \cite{masteringBitcoin}.

\section{Gedecentraliseerd netwerk}
The interactions among user on blockchain principally use a decentralized network in which each user represents a node at which a blockchain client is installed. When a user performing a transaction with another user or when a node receives data from another node, it verifies the authenticity of the data. It then broadcasts the validated data to every other node connected to it [86]. Within such a mechanism, the data spreads across the whole network. The benefit of using this mechanism is the centralization of the human factor is minimized and trust shifts from the human agents of a central organization to an open source code [5].
\newpage

\section{Consensus (overeenstemming) algoritmes}
Om de werking van de blockchain te begrijpen en te vertrouwen, moet het begrip van Consensus oftewel overeenstemmings algoritmes duidelijk zijn. Deze algoritmes worden gebruikt wanneer een (nieuw) blok aan informatie geverifieerd wordt. Het zorgt voor één historie van transacties waar de geschiedenis geen ongeldige of tegenstrijdige transacties bevat.\par

Dit is allemaal nodig omdat de blockchain draait in een zelf gereguleerde, wantrouwende omgeving waar het nodig is om meningsverschillen over transacties binnen het netwerk op een lijn te krijgen. Het zorgt er bijvoorbeeld ook voor dat er niet één account is die meer uitgeeft dan dat het heeft, of waar hij of zij twee keer iets overmaakt, dit heet double-spending. De bekende consensus algoritmes zijn proof of work en proof of stake.\par

\begin{enumerate}
	\item Proof of Work (PoW)\\
	Het PoW consensus algoritme is het meest voorkomende algoritme in blockchain. Het werd geïntroduceerd door de Bitcoin en gaat ervan uit dat alle peers met rekenkracht mee stemmen door PoW-instanties, crytografische puzzels op te lossen en hiermee het recht hebben om de volgende blok aan te maken in het netwerk. Zo maakt de Bitcoin gebruik van een hash-gebaseerde PoW, wat inhoudt dat de peers een nonce-waarde \footnote{https://en.wikipedia.org/wiki/Cryptographic_nonce} proberen te vinden. Hierbij is wel de voorwaarden dat de vorige blokhash kleiner moet zijn dan de huidige doelwaarde die in de blokparameters staat van het vorige blok. Wanneer een dergelijke nonce wordt gevonden, maakt de miner het blok aan en stuurt hij het door naar zijn peers. Deze peers ontvangen dit dan en verifiëren of het klopt aan de hand van het vorige blok \cite{securityPOW}.
	\item Proof-of-Stake (PoS)\\
	Op het moment moet Proof-of-Stake zich nog bewijzen in de crypto valuta gemeenschap. Het is ontwikkeld om bestaande inefficiënte consensus algoritmes zoals PoW te vervangen. Het algemeen begrip van PoS is dat een peer (deelnemer van de blockchain), pas het stemrecht heeft op een nieuwe blok in de blockchain als de peer voldoende heeft ingezet in het netwerk. In het geval van PeerCoin \footnote{https://peercoin.net/} worden nieuwe blokken gegeneerd door het netwerk op basis van niet gespendeerde valuta en hoe oud deze is \cite{posProtocol}.\par
	
	Met deze methode wordt aangenomen dat mensen met meer valuta minder snel het netwerk zullen aanvallen \cite{blockchainIssuesAndChallenges}. Dit lost op het gebied van energiebesparing de problemen van PoW op, waar gebruikers miners aan zetten om valuta te ontvangen. Bij PoS wordt de valuta die niet beweegt steeds meer waard.
\end{enumerate}

\section{Smart contract}
Het idee achter smart contracts is een "geautomatiseerd transactieprotocol dat de voorwaarden van een contract uitvoert" \cite{smartContracts} en werd voor het eerst bedacht door cryptograaf Nick Szabo. Dit idee is door de opkomst van de blockchain populair geworden. Dit komt door dat de blockchain gedecentraliseerd is en daardoor de tussenpersonen bij een gecentraliseerde smart contracts applicatie eruithaald. Smart contracts is, in de context van blockchain, gewoon software die op een blockchain wordt gepubliceerd en die transacties kan ontvangen of uitvoeren. Iedere transactie heeft een adres en kan worden gevolgd. \par